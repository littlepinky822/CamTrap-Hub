<!DOCTYPE html>
<html>
    <head>
        <title>Home Page</title>
    </head>
    <body>
        <h1>Camera Trapper App Store</h1>
        <button id="animl" onclick="startAniml()">Animl</button>
        <button id="zamba" onclick="window.location.href='/zamba'">Zamba</button>
        <button id="megadetector" onclick="window.location.href='/megadetector'">MegaDetector</button>
        <button id="trapper" onclick="startTrapper()">Trapper</button>
        <div id="loading" style="display: none;">Loading Trapper...</div>

        <script>
            function startAniml() {
                fetch('/animl/start', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'running') {
                        window.location.href = data.url;
                    } else {
                        console.error('Failed to start Animl:', data.error);
                    }
                })
                .catch(error => console.error('Error:', error));
            }
            function startTrapper() {
                const loadingElement = document.getElementById('loading');
                loadingElement.style.display = 'block';

                fetch('/trapper/start', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'running') {
                        window.location.href = data.url;
                    } else {
                        console.error('Failed to start Trapper:', data.error);
                        loadingElement.style.display = 'none';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    loadingElement.style.display = 'none';
                });
            }
        </script>
    </body>
</html>